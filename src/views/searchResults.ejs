<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Busca</title>
    <link rel="stylesheet" href="/css/searchResults.css">
</head>
<body>
    <div class="main-header">
        <div class="home-container">
            <a href="/v1/"><p class="home-btn">Home</p></a>
        </div>
        <div class="academic-logo-container">
            <img src="/images/white-logo.png" alt="academic-logo" class="academic-logo">
        </div>
    </div>
    <div class="container">
        <% if(context.profileData.length > 0){ %>
        <% for( profile of context.profileData ){ %>
        <div class="profile">
            <div class="profile-image">
                <img class="found-image" src="data:<%= profile.image_mimetype %>;base64,<%= profile.image_data.toString('base64') %>" alt="found-profile-image">
            </div>
            <div class="name-desc-group">
                <div class="profile-name">
                    <a href="/v1/profile/<%= profile.register_id %>">
                        <p class="found-name"><%=  profile.name %></p>
                    </a>
                </div>
    
                <div class="profile-description">
                    <p class="found-desc"><%= profile.description %></p>
                </div>
            </div>
        </div>
        <% } %>
        <% } else { %>
            <div class="not-found-container">
                <div class="not-found">
                    <p class="not-found-text">Nada encontrado.</p>
                </div>
                <div class="back-btn">
                    <a href="/v1/"><p class="back">Voltar</p></a>
                </div>
            </div>
        <% } %>
        <% if(context.profileData.length > 0){ %>
        <div class="footer-container">
            <% for( idx of context.pages_idx) { %>
            <div class="page-idx-container">
                <a class="page-index"><p class="idx"><%= idx %></p></a>
            </div>
            <% } %>
        </div>
        <% } %>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", (event) => {
        const url = new URL(window.location.href);
        const idx_page = document.querySelectorAll('.page-index');
        
        idx_page.forEach(idx => {
            idx.addEventListener('click', (e) => {
                e.preventDefault();
                const num = e.target.innerText; //Pg. a ser redirecionado
                url.searchParams.set('page', num); //Insere o par√¢metro page=num na URL
                window.location.href = url.toString(); //Faz o redirect para a nova URL
            });
        });
    });
    </script>
</body>
</html>